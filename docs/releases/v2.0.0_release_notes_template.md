# Release Notes - Teams Bot v2.0.0

**Release Date**: [YYYY-MM-DD]
**Release Type**: Major Release
**Risk Level**: Medium

---

## üéØ Overview

Teams Bot v2.0.0 introduces conversational AI capabilities with natural language processing, enabling users to interact with the bot using plain English instead of slash commands. This release includes PostgreSQL-based data querying, intelligent intent detection, and optional adaptive card responses.

---

## ‚ú® New Features

### 1. Natural Language Processing (NLP)
- **Description**: Ask questions in plain English without memorizing commands
- **Examples**:
  - "Show me deals in Texas"
  - "Find top vault candidates"
  - "What meetings do I have this week?"
- **Benefits**:
  - Reduced learning curve for new users
  - Faster information retrieval
  - More intuitive user experience

### 2. Multi-Turn Conversations
- **Description**: Bot maintains context across multiple messages
- **Examples**:
  - User: "Show me recent deals"
  - Bot: [Lists 5 deals]
  - User: "Tell me more about #3"
  - Bot: [Provides detailed information about deal #3]
- **Benefits**: Natural conversation flow without repeating context

### 3. Intelligent Clarification
- **Description**: Bot asks for clarification when queries are ambiguous
- **Example**:
  ```
  User: "Show candidates"
  Bot: "Please specify what you're looking for:
        1. Vault candidates
        2. Recent submissions
        3. By location
        Select 1-3"
  ```
- **Benefits**: More accurate results, guided discovery

### 4. PostgreSQL Direct Queries
- **Description**: Real-time data access from PostgreSQL database
- **Tables Available**:
  - `deals` - Deal pipeline information
  - `deal_notes` - Deal activity and notes
  - `meetings` - Scheduled meetings and participants
- **Benefits**: Always up-to-date information, faster response times

### 5. Executive Data Access
- **Description**: Enhanced permissions for executive users
- **Eligible Users**: steve@, brandon@, daniel.romitelli@
- **Access Level**: Full visibility across all teams and owners
- **Regular Users**: See only their assigned records

### 6. InvokeResponse Fix
- **Description**: Fixed 500 errors on adaptive card button clicks
- **Impact**: All button interactions now work correctly
- **Technical**: Proper InvokeResponse with status 200

---

## üéõÔ∏è Feature Flags

### New Flags
```yaml
ENABLE_NLP_CARDS:
  default: false
  description: Enable adaptive cards for NLP responses
  migration: Set to true for rich formatting in Teams

ENABLE_AZURE_AI_SEARCH:
  default: false
  description: Route complex queries to Azure AI Search
  status: Experimental - do not enable in production
```

### Updated Flags
```yaml
USE_ASYNC_DIGEST:
  default: true  # Changed from false
  description: Service Bus integration for digest generation
  impact: Faster digest generation, better scalability

PRIVACY_MODE:
  default: true
  description: Company name anonymization
  status: Required for compliance
```

### Migration Guide
```bash
# For text-only NLP (recommended initially)
ENABLE_NLP_CARDS=false

# For full experience with cards (after testing)
ENABLE_NLP_CARDS=true

# Keep these as-is
PRIVACY_MODE=true
USE_ASYNC_DIGEST=true
FEATURE_LLM_SENTIMENT=true
USE_ZOHO_API=false  # PostgreSQL is primary source
```

---

## üîÑ Breaking Changes

### 1. Response Format Change
- **Old**: Slash commands returned only adaptive cards
- **New**: Configurable via `ENABLE_NLP_CARDS` flag
- **Migration**: No action required, backward compatible

### 2. Database Schema Updates
- **New Columns**:
  - `teams_conversations.nlp_intent` - Stores detected intent
  - `teams_conversations.conversation_context` - Multi-turn context
- **Migration**: Automatic via Alembic migrations

### 3. API Endpoint Changes
- **Deprecated**: `/api/teams/process-message` (v1 endpoint)
- **New**: `/api/teams/webhook` (unified handler)
- **Impact**: Internal only, Teams client unaffected

---

## üß™ Smoke Test Results

### Test Environment
- **Date**: [YYYY-MM-DD HH:MM]
- **Tester**: [Name]
- **Environment**: Production

### Test Results
| Test Scenario | Result | Response Time | Notes |
|--------------|--------|---------------|-------|
| Natural Language Query | [ ] Pass [ ] Fail | ___ms | |
| Multi-Turn Context | [ ] Pass [ ] Fail | ___ms | |
| Clarification Flow | [ ] Pass [ ] Fail | ___ms | |
| Slash Command | [ ] Pass [ ] Fail | ___ms | |
| Button Click | [ ] Pass [ ] Fail | ___ms | |

### Performance Metrics
- **Average Response Time**: ___ms
- **P95 Response Time**: ___ms
- **Success Rate**: ___%
- **Error Count**: ___

### Sample Transcripts
```
[Attach 2-3 conversation transcripts showing successful interactions]
```

---

## üìä Performance Impact

### Baseline Metrics (Pre-Release)
- Response Time P95: 2,500ms
- Success Rate: 99.2%
- Daily Active Users: 45

### Expected Impact
- Response Time: +500ms for NLP processing
- Success Rate: No change expected
- User Engagement: +30% expected with NLP

### Monitoring
- Dashboard: [Azure Portal Link]
- Alerts Configured: High latency, Low success rate
- Escalation: PagerDuty ‚Üí On-call engineer

---

## üöÄ Deployment Information

### Container Details
- **Image**: `wellintakeacr0903.azurecr.io/teams-bot:2.0.0`
- **Revision**: `teams-bot--v20251017-XXXXXX`
- **Resource Group**: `TheWell-Infra-East`
- **Container App**: `teams-bot`

### Configuration
- **Min Replicas**: 1
- **Max Replicas**: 10
- **CPU**: 0.5 cores
- **Memory**: 1.0 GB
- **Auto-scaling**: CPU > 70% or Memory > 80%

---

## üêõ Known Issues

### 1. Card Rendering on Mobile
- **Impact**: Minor formatting issues on Teams mobile app
- **Workaround**: Use desktop client or set `ENABLE_NLP_CARDS=false`
- **Fix**: Planned for v2.0.1

### 2. Context Timeout
- **Impact**: Context lost after 30 minutes of inactivity
- **Workaround**: Start new conversation
- **Fix**: By design for security

---

## üìö Documentation

### Updated Documentation
- [Teams Bot User Guide](../guides/teams_bot_user_guide.md)
- [NLP Query Examples](../guides/nlp_examples.md)
- [Admin Configuration](../admin/teams_bot_config.md)
- [Troubleshooting Guide](../troubleshooting/teams_bot.md)

### Training Materials
- Video walkthrough: [Link]
- Quick reference card: [PDF]
- Teams channel for questions: #teams-bot-help

---

## üë• Beta Program

### Phase 1 (Days 1-3)
- **Participants**: QA Team
- **Features**: Text-only NLP responses
- **Feedback**: [Form Link]

### Phase 2 (Days 4-7)
- **Participants**: Dev Team + QA
- **Features**: Text-only NLP responses
- **Success Criteria**: >99% success rate

### Phase 3 (Days 8-14)
- **Participants**: Same as Phase 2
- **Features**: Adaptive cards enabled
- **Monitoring**: Enhanced telemetry

### Full Rollout (Day 15+)
- **Criteria**: All beta success metrics met
- **Approval**: Required from Product Owner

---

## ‚ö†Ô∏è Rollback Plan

### Quick Rollback (< 5 minutes)
```bash
# Revert to previous revision
az containerapp revision activate \
  --name teams-bot \
  --resource-group TheWell-Infra-East \
  --revision [previous-revision]
```

### Feature Disable (< 1 minute)
```bash
# Disable NLP features
az containerapp update \
  --name teams-bot \
  --resource-group TheWell-Infra-East \
  --set-env-vars ENABLE_NLP_CARDS=false
```

---

## üìû Support & Contact

### For Issues
- **Teams Channel**: #teams-bot-support
- **Email**: teams-bot-dev@emailthewell.com
- **PagerDuty**: For critical issues only

### For Feedback
- **Survey**: [Link to feedback form]
- **Teams Channel**: #teams-bot-feedback
- **Product Owner**: product@emailthewell.com

---

## ‚úÖ Approval

### QA Sign-off
- **Name**: _________________________
- **Date**: _________________________
- **Status**: [ ] Approved [ ] Conditional [ ] Rejected

### Product Owner Sign-off
- **Name**: _________________________
- **Date**: _________________________
- **Status**: [ ] Approved [ ] Conditional [ ] Rejected

### Executive Sponsor Sign-off
- **Name**: _________________________
- **Date**: _________________________
- **Status**: [ ] Approved [ ] Conditional [ ] Rejected

---

## üìù Post-Release Notes

_[To be filled after release]_

### Actual Metrics (24 hours post-release)
- **Success Rate**: ___%
- **P95 Response Time**: ___ms
- **User Adoption**: ___% using NLP
- **Incidents**: ___

### Lessons Learned
- _[Item 1]_
- _[Item 2]_
- _[Item 3]_

### Next Steps
- _[Action items for v2.0.1]_

---

**Document Version**: 1.0
**Last Updated**: [YYYY-MM-DD]
**Author**: Teams Bot Development Team