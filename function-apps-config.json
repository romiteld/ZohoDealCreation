{
  "function_apps": {
    "well-intake-functions": {
      "name": "well-intake-functions",
      "resource_group": "TheWell-Infra-East",
      "location": "eastus",
      "runtime": {
        "stack": "python",
        "version": "3.11",
        "functions_version": "~4"
      },
      "hosting": {
        "plan_type": "consumption",
        "plan_name": "well-intake-functions-plan",
        "storage_account": "wellintakefuncstorage"
      },
      "app_settings": {
        "FUNCTIONS_WORKER_RUNTIME": "python",
        "FUNCTIONS_EXTENSION_VERSION": "~4",
        "PYTHON_VERSION": "3.11",
        "AzureWebJobsFeatureFlags": "EnableWorkerIndexing",
        "ZOHO_OAUTH_SERVICE_URL": "https://well-zoho-oauth.azurewebsites.net",
        "API_BASE_URL": "https://well-intake-api.salmonsmoke-78b2d936.eastus.azurecontainerapps.io",
        "AZURE_CONTAINER_NAME": "email-attachments",
        "EMAIL_PROCESSING_QUEUE": "email-processing",
        "EMAIL_OUTPUT_QUEUE": "email-output",
        "MAX_RETRIES": "3",
        "TIMEOUT_SECONDS": "300"
      },
      "key_vault_secrets": [
        "openai-api-key",
        "database-url",
        "storage-connection-string",
        "zoho-client-id",
        "zoho-client-secret"
      ],
      "cors": [
        "https://well-intake-api.salmonsmoke-78b2d936.eastus.azurecontainerapps.io"
      ],
      "functions": [
        {
          "name": "ProcessEmail",
          "type": "HttpTrigger",
          "route": "process-email",
          "methods": ["POST"]
        },
        {
          "name": "BatchProcessEmails",
          "type": "QueueTrigger",
          "queue": "email-processing"
        },
        {
          "name": "ZohoWebhook",
          "type": "HttpTrigger",
          "route": "zoho/webhook",
          "methods": ["POST"]
        },
        {
          "name": "HealthCheck",
          "type": "HttpTrigger",
          "route": "health",
          "methods": ["GET"]
        }
      ],
      "monitoring": {
        "app_insights": "well-functions-insights",
        "alerts": [
          {
            "name": "HighFailureRate",
            "metric": "FailedRequests",
            "threshold": 10,
            "window": "5m"
          },
          {
            "name": "SlowProcessing",
            "metric": "FunctionExecutionTime",
            "threshold": 60000,
            "window": "10m"
          }
        ]
      }
    },
    "well-content-repurpose": {
      "name": "well-content-repurpose",
      "resource_group": "TheWell-Infra-East",
      "location": "eastus",
      "runtime": {
        "stack": "python",
        "version": "3.11",
        "functions_version": "~4"
      },
      "hosting": {
        "plan_type": "consumption",
        "plan_name": "well-content-plan",
        "storage_account": "wellcontentstorage"
      },
      "app_settings": {
        "FUNCTIONS_WORKER_RUNTIME": "python",
        "FUNCTIONS_EXTENSION_VERSION": "~4",
        "PYTHON_VERSION": "3.11",
        "AzureWebJobsFeatureFlags": "EnableWorkerIndexing",
        "CONTENT_CONTAINER_NAME": "content-repository",
        "GENERATED_CONTENT_CONTAINER": "generated-content",
        "MAX_CONTENT_SIZE_MB": "50",
        "SUPPORTED_FORMATS": "pdf,docx,txt,md,html",
        "CONTENT_GENERATION_MODEL": "gpt-4",
        "CONTENT_TEMPERATURE": "0.7",
        "CONTENT_PROCESSING_QUEUE": "content-processing",
        "CONTENT_OUTPUT_QUEUE": "content-output",
        "MAX_CONCURRENT_JOBS": "10",
        "JOB_TIMEOUT_MINUTES": "30",
        "RETRY_COUNT": "3",
        "RETRY_INTERVAL_SECONDS": "60"
      },
      "key_vault_secrets": [
        "openai-api-key",
        "database-url",
        "content-storage-key"
      ],
      "cors": ["*"],
      "functions": [
        {
          "name": "GenerateContent",
          "type": "HttpTrigger",
          "route": "generate",
          "methods": ["POST"]
        },
        {
          "name": "ProcessContentQueue",
          "type": "QueueTrigger",
          "queue": "content-processing"
        },
        {
          "name": "RepurposeContent",
          "type": "HttpTrigger",
          "route": "repurpose",
          "methods": ["POST"]
        },
        {
          "name": "GetContentStatus",
          "type": "HttpTrigger",
          "route": "status/{jobId}",
          "methods": ["GET"]
        },
        {
          "name": "ListGeneratedContent",
          "type": "HttpTrigger",
          "route": "content/list",
          "methods": ["GET"]
        },
        {
          "name": "ScheduledCleanup",
          "type": "TimerTrigger",
          "schedule": "0 0 2 * * *"
        }
      ],
      "storage_containers": [
        "content-repository",
        "generated-content",
        "temp-uploads"
      ],
      "storage_queues": [
        "content-processing",
        "content-output",
        "content-errors"
      ],
      "monitoring": {
        "app_insights": "well-functions-insights",
        "alerts": [
          {
            "name": "ContentGenerationFailure",
            "metric": "FailedRequests",
            "threshold": 5,
            "window": "15m"
          },
          {
            "name": "QueueBacklog",
            "metric": "QueueMessageCount",
            "threshold": 100,
            "window": "5m"
          },
          {
            "name": "LongRunningJobs",
            "metric": "FunctionExecutionTime",
            "threshold": 300000,
            "window": "15m"
          }
        ]
      }
    }
  },
  "shared_resources": {
    "key_vault": {
      "name": "wellintakekeyvault",
      "resource_group": "TheWell-Infra-East",
      "soft_delete": true,
      "retention_days": 7,
      "purge_protection": false
    },
    "application_insights": {
      "name": "well-functions-insights",
      "resource_group": "TheWell-Infra-East",
      "retention_days": 90,
      "daily_cap_gb": 10
    },
    "network_security": {
      "allowed_ips": [],
      "vnet_integration": false,
      "private_endpoints": false
    }
  },
  "deployment_settings": {
    "deployment_method": "zip_deploy",
    "staging_slot": true,
    "auto_swap": false,
    "health_check_path": "/api/health",
    "pre_warm": true
  },
  "cost_optimization": {
    "consumption_plan": true,
    "always_on": false,
    "auto_scale": {
      "min_instances": 0,
      "max_instances": 200,
      "scale_out_cooldown": 60
    }
  },
  "backup_and_recovery": {
    "backup_enabled": false,
    "point_in_time_restore": false,
    "geo_redundancy": false
  }
}